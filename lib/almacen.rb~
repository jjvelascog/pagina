class Almacen
	require "rubygems"
	require "httparty"
	require 'base64'
	require 'openssl'

	@@base_uri = "http://bodega-integracion-2014.herokuapp.com"
	@@key = 'MDRrbrJ7'
	@@aut_header = "UC grupo4:"	

	@@id = "_id"
	@@pulmon = "pulmon" 
	@@despacho = "despacho" 
	@@recepcion = "recepcion" 
	@@espacio = "totalSpace" 
	@@usado = "usedSpace" 
	@@version = "__v"

	def self.get_almacenes
		signature = 'GET'
		aut = @@aut_header+Base64.encode64("#{OpenSSL::HMAC.digest('sha1',@@key, signature)}")
		consulta = HTTParty.get("http://bodega-integracion-2014.herokuapp.com/almacenes",:headers => { "Authorization" => aut})
		
		a = []
		consulta.each do |i|
			a << Almacen.new(i[@@id],i[@@espacio],i[@@usado])
		end
	end

	def initialize(id,total_space,used_space)
		@id = id
		@space = total_space
		@used = used_space
	end
end

